const a20_0x21afba=a20_0x4fd0;function a20_0x280f(){const _0x5e47de=['join','2542780wPhndR','CAPABILITY_NAMED_IAM','CloudFormation','4939072JfGews','stringify','StackName','mlXvT','nNnla','sSWju','templates','./AWSUtils','bSmai','toString','Capabilities','Key','Parameters','349979cYUgNe','1978284NXCQPB','Tags','AifFt','Value','createAutoscalerStack','waitFor','Resources','stackCreateComplete','valueOf','Apmjz','5765820xUIcOW','OnFailure','Properties','868542UvXRNl','66CVPDsZ','58977ZezcXD','StackId','promisifyAll','browserstack:cluster','browserstack:creationDate','UBAsH','bluebird','createStack','../config/logger','schema','iwczK','push','load','utf-8','apiVersion','JfAOs','promise','2010-05-15','ljfJD','js-yaml','../config/constants','weeIO','path'];a20_0x280f=function(){return _0x5e47de;};return a20_0x280f();}(function(_0x17e9c6,_0x38001b){const _0xa1c203=a20_0x4fd0,_0x108cca=_0x17e9c6();while(!![]){try{const _0x417fdc=parseInt(_0xa1c203(0xbe))/0x1+-parseInt(_0xa1c203(0xbf))/0x2*(parseInt(_0xa1c203(0xc0))/0x3)+parseInt(_0xa1c203(0xa0))/0x4+-parseInt(_0xa1c203(0xbb))/0x5+parseInt(_0xa1c203(0xb1))/0x6+-parseInt(_0xa1c203(0xb0))/0x7+parseInt(_0xa1c203(0xa3))/0x8;if(_0x417fdc===_0x38001b)break;else _0x108cca['push'](_0x108cca['shift']());}catch(_0x96d1d5){_0x108cca['push'](_0x108cca['shift']());}}}(a20_0x280f,0x92583));function a20_0x4fd0(_0x2a2ac4,_0x4fb045){const _0x280f1e=a20_0x280f();return a20_0x4fd0=function(_0x4fd0e2,_0x1c4e1c){_0x4fd0e2=_0x4fd0e2-0x9a;let _0x16c791=_0x280f1e[_0x4fd0e2];return _0x16c791;},a20_0x4fd0(_0x2a2ac4,_0x4fb045);}const fs=require('fs'),path=require(a20_0x21afba(0x9e)),yaml=require(a20_0x21afba(0x9b)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),Promise=require(a20_0x21afba(0xc6)),AWS=require(a20_0x21afba(0xaa))['awsObj'],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a20_0x21afba(0x9c)),{logger}=require(a20_0x21afba(0xc8));Promise[a20_0x21afba(0xc2)](fs),addAutoscalerTags=async(_0x539d7c,_0x2c0b97,_0x52cb91)=>{const _0x581967=a20_0x21afba;for(let _0x32c59b in _0x539d7c[_0x581967(0xb7)]){_0x539d7c[_0x581967(0xb7)][_0x32c59b][_0x581967(0xbd)]&&_0x539d7c[_0x581967(0xb7)][_0x32c59b][_0x581967(0xbd)][_0x581967(0xb2)]&&_0x539d7c[_0x581967(0xb7)][_0x32c59b][_0x581967(0xbd)][_0x581967(0xb2)]['push'](..._0x52cb91);}},exports[a20_0x21afba(0xb5)]=async _0x1142fc=>{const _0x1f1200=a20_0x21afba,_0x2095f0={'JfAOs':_0x1f1200(0xc3),'iwczK':_0x1f1200(0xc4),'ljfJD':_0x1f1200(0xd1),'UBAsH':_0x1f1200(0xa9),'AifFt':'autoscaler-role-creation.yaml','bSmai':_0x1f1200(0xcd),'nNnla':function(_0x29e12d,_0x293308,_0x39f275,_0x16ddd){return _0x29e12d(_0x293308,_0x39f275,_0x16ddd);},'weeIO':'DELETE','mlXvT':'ClusterName','sSWju':_0x1f1200(0xa1),'Apmjz':_0x1f1200(0xb8)},_0x1bd6d2=COMMON_HST_TAGS,_0x2f51e8={};_0x2f51e8[_0x1f1200(0xae)]=_0x2095f0[_0x1f1200(0xcf)],_0x2f51e8[_0x1f1200(0xb4)]=_0x1142fc,_0x1bd6d2['push'](_0x2f51e8),_0x1bd6d2[_0x1f1200(0xcb)]({'Key':_0x2095f0[_0x1f1200(0xca)],'Value':new Date()[_0x1f1200(0xb9)]()[_0x1f1200(0xac)]()});const _0x5f20a7={};_0x5f20a7[_0x1f1200(0xce)]=_0x2095f0[_0x1f1200(0x9a)];const _0x2902e3=new AWS[(_0x1f1200(0xa2))](_0x5f20a7),_0xece159=await fs['readFileAsync'](path[_0x1f1200(0x9f)](__dirname,'..',_0x2095f0[_0x1f1200(0xc5)],_0x2095f0[_0x1f1200(0xb3)]),_0x2095f0[_0x1f1200(0xab)]),_0x20ffaf={};_0x20ffaf[_0x1f1200(0xc9)]=CLOUDFORMATION_SCHEMA;const _0x56171b=yaml[_0x1f1200(0xcc)](_0xece159,_0x20ffaf);_0x2095f0[_0x1f1200(0xa7)](addAutoscalerTags,_0x56171b,_0x1142fc,_0x1bd6d2);const _0x579f66=JSON[_0x1f1200(0xa4)](_0x56171b),_0x4e81d6={};_0x4e81d6[_0x1f1200(0xa5)]=CLUSTER_AUTOSCALER_STACK_NAME,_0x4e81d6[_0x1f1200(0xbc)]=_0x2095f0[_0x1f1200(0x9d)],_0x4e81d6['TemplateBody']=_0x579f66,_0x4e81d6[_0x1f1200(0xaf)]=[{'ParameterKey':_0x2095f0[_0x1f1200(0xa6)],'ParameterValue':_0x1142fc}],_0x4e81d6[_0x1f1200(0xad)]=[_0x2095f0[_0x1f1200(0xa8)]],_0x4e81d6[_0x1f1200(0xb2)]=_0x1bd6d2;const _0x2c4bf8=_0x4e81d6,_0x44fb5d=await _0x2902e3[_0x1f1200(0xc7)](_0x2c4bf8)[_0x1f1200(0xd0)]();logger['debug']('Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete');const _0x4e4444={};return _0x4e4444[_0x1f1200(0xa5)]=_0x44fb5d[_0x1f1200(0xc1)],_0x2902e3[_0x1f1200(0xb6)](_0x2095f0[_0x1f1200(0xba)],_0x4e4444)[_0x1f1200(0xd0)]();};