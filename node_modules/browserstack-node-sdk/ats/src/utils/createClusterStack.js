function a21_0xe5d3(){const _0x5a670b=['StackName','ClusterName','ParameterGroups','34xafdAT','evIPO','tDwOA','vLKpW','EZoDc','sQGoO','dzNwy','DELETE','kQfya','YXFTa','path','ZkCyj','Value','vjOcb','Subnet03','cswRi','ibWIZ','./AWSUtils','sswVg','40OrDQcr','rdsrJ','kNQAY','HWbQx','NodeImageId','Metadata','BUMwo','oYaCc','Cmwok','NodeAutoScalingGroupMinSize','OnFailure','3|2|1|4|0','6581234DwdjHR','aMpKL','8wWtzoJ','YWVKJ','QVEyS','7219017rTgsoS','joSkl','BUtbh','apiVersion','DCKlO','Resources','Key','vpc-import.yaml','ekevf','7648459ezGNPk','nJdWI','cIxQP','NodeGroupName','517368hetwUt','aFzGX','debug','12hUidsb','yrDvJ','alcxU','js-yaml','DjvBZ','fxtIa','dBFkM','s3-create.yaml','bBXSb','waitFor','4meevwh','vZRIj','ZkpjD','Subnet01','QfFRN','instanceType','forEach','stackCreateComplete','1030893mambUp','wzHKH','333qbMaFO','subnet-import.yaml','186650GSBXFE','createClusterStack','../config/logger','ezowp','kBGZT','s3Bucket','-NodeGroup','Capabilities','vWtnk','schema','SubnetIds','hHdYu','FASzU','WRXdY','Subnet02','Outputs','aws-eks-cluster-dep.yaml','Subnet03Block','awsObj','NodeGroup','push','qqDuY','Oluns','createStack','Parameters','bluebird','HUShK','tWVFg','ParameterValue','pwhGU','CFTemplates','hWNHF','Subnet','sUFin','2|3|1|0|4','YGAjZ','11195boTFDn','YKPaS','KlEXs','AWxCm','Properties','utf-8','VpcBlock','StackId','NodeInstanceType','zgejN','VpWLf','CAPABILITY_NAMED_IAM','promise','load','yuxQE','QdzZg','Ref','ResourcesVpcConfig','keys','VPC','subnet-create.yaml','OkwRp','browserstack:creationDate','Subnets','ParameterKey','PDuEe','Tags','browserstack:cluster','PklKe','padStart','join','ingNk','EoQMB','oMqRL','UrmsX','ami','Subnet01Block','SKEwj','JfPtS','WXkAA','toString','hbQBP','split','IMHiS','aarGj','aMiPq','stringify','jexQU','AWS::CloudFormation::Interface','SaXxq','readFileAsync','RwPPF','EKSCluster','valueOf','ubCtz','iSKwt','JqfbF','promisifyAll','HssmO','fkJgU','MVDNf','XSgNX','gXjYg','Fn::Join'];a21_0xe5d3=function(){return _0x5a670b;};return a21_0xe5d3();}const a21_0x5d143a=a21_0x5d49;(function(_0x279f11,_0x39c33f){const _0x17a767=a21_0x5d49,_0x4ca159=_0x279f11();while(!![]){try{const _0x30e379=parseInt(_0x17a767(0x1ca))/0x1*(parseInt(_0x17a767(0x15c))/0x2)+-parseInt(_0x17a767(0x1a2))/0x3*(-parseInt(_0x17a767(0x19a))/0x4)+parseInt(_0x17a767(0x16f))/0x5*(parseInt(_0x17a767(0x18d))/0x6)+-parseInt(_0x17a767(0x189))/0x7*(parseInt(_0x17a767(0x17d))/0x8)+parseInt(_0x17a767(0x1a4))/0x9*(-parseInt(_0x17a767(0x1a6))/0xa)+-parseInt(_0x17a767(0x17b))/0xb*(-parseInt(_0x17a767(0x190))/0xc)+parseInt(_0x17a767(0x180))/0xd;if(_0x30e379===_0x39c33f)break;else _0x4ca159['push'](_0x4ca159['shift']());}catch(_0x3440b0){_0x4ca159['push'](_0x4ca159['shift']());}}}(a21_0xe5d3,0x910d3));const fs=require('fs'),path=require(a21_0x5d143a(0x166)),Promise=require(a21_0x5d143a(0x1bf)),yaml=require(a21_0x5d143a(0x193)),{CLOUDFORMATION_SCHEMA}=require('js-yaml-cloudformation-schema'),AWS=require(a21_0x5d143a(0x16d))[a21_0x5d143a(0x1b8)],{CLUSTER_DEP_STACK_NAME,COMMON_HST_TAGS,global_registry}=require('../config/constants'),{logger}=require(a21_0x5d143a(0x1a8)),{isBucketPresent}=require('./AWSUtils');function a21_0x5d49(_0x28474c,_0x4f5835){const _0xe5d3d9=a21_0xe5d3();return a21_0x5d49=function(_0x5d496e,_0x4ef8f1){_0x5d496e=_0x5d496e-0x143;let _0x3de4e8=_0xe5d3d9[_0x5d496e];return _0x3de4e8;},a21_0x5d49(_0x28474c,_0x4f5835);}Promise[a21_0x5d143a(0x152)](fs),mergeTemplates=(_0x5e3278,_0x1dfbc7)=>{const _0x5aa3e1=a21_0x5d143a,_0x24c0e4={};_0x24c0e4[_0x5aa3e1(0x1e3)]=function(_0x2c143e,_0x43af02){return _0x2c143e!==_0x43af02;},_0x24c0e4[_0x5aa3e1(0x19c)]=_0x5aa3e1(0x151),_0x24c0e4[_0x5aa3e1(0x155)]=_0x5aa3e1(0x16b),_0x24c0e4[_0x5aa3e1(0x191)]=_0x5aa3e1(0x1dd),_0x24c0e4['jcaeJ']=function(_0x15fe25,_0x181ee1){return _0x15fe25!==_0x181ee1;},_0x24c0e4[_0x5aa3e1(0x16c)]=_0x5aa3e1(0x176),_0x24c0e4[_0x5aa3e1(0x150)]='aJjsq';const _0x3a81b3=_0x24c0e4;Object['keys'](_0x1dfbc7)[_0x5aa3e1(0x1a0)](_0x1f4026=>{const _0x41cfc2=_0x5aa3e1,_0x57c9dd={};_0x57c9dd[_0x41cfc2(0x184)]=_0x3a81b3['yrDvJ'];const _0x2ed8ce=_0x57c9dd;if(_0x3a81b3['jcaeJ'](_0x3a81b3['ibWIZ'],_0x3a81b3[_0x41cfc2(0x150)])){var _0x29af64=_0x1dfbc7[_0x1f4026];Object[_0x41cfc2(0x1dc)](_0x29af64)['forEach'](_0x53f632=>{const _0x3e7d97=_0x41cfc2;if(_0x3a81b3['PDuEe'](_0x3a81b3[_0x3e7d97(0x19c)],_0x3a81b3['MVDNf']))_0x5e3278[_0x1f4026][_0x53f632]=_0x29af64[_0x53f632];else{const _0x103e1a={};_0x103e1a[_0x3e7d97(0x1e2)]=_0x2ed8ce[_0x3e7d97(0x184)],_0x103e1a[_0x3e7d97(0x1c2)]=_0x56f91d,_0x56e9d[_0x3e7d97(0x1be)]['push'](_0x103e1a);}});}else _0x12b15c[_0x5d9faf[_0x41cfc2(0x186)]]=_0x12d7a8[_0x41cfc2(0x168)];});},addVPCData=async(_0x181ead,_0x1d858d)=>{const _0x47ded6=a21_0x5d143a,_0x4114af={'hWNHF':function(_0x23bc07,_0x48c08f){return _0x23bc07(_0x48c08f);},'ezowp':function(_0x4425c3,_0x24b3d6){return _0x4425c3===_0x24b3d6;},'WRXdY':'lGBmR','OkwRp':_0x47ded6(0x1c4),'qqDuY':_0x47ded6(0x187),'kQfya':_0x47ded6(0x1cf),'ubCtz':function(_0x4b2e2c,_0x156d20,_0x242002){return _0x4b2e2c(_0x156d20,_0x242002);},'YGAjZ':_0x47ded6(0x149),'kBGZT':_0x47ded6(0x1dd),'vgUuX':function(_0x2c89f5,_0x277faf){return _0x2c89f5!==_0x277faf;},'WXkAA':'xDqVg','qvTeu':_0x47ded6(0x161),'DjvBZ':'vpc-create.yaml','ekevf':_0x47ded6(0x1d0)};if(_0x1d858d){if(_0x4114af[_0x47ded6(0x1a9)](_0x4114af[_0x47ded6(0x1b3)],_0x4114af[_0x47ded6(0x1b3)])){const _0x57981b=await fs['readFileAsync'](path[_0x47ded6(0x1e8)](__dirname,'..',_0x4114af[_0x47ded6(0x1df)],_0x4114af[_0x47ded6(0x1bb)]),_0x4114af[_0x47ded6(0x164)]),_0x208dc5={};_0x208dc5['schema']=CLOUDFORMATION_SCHEMA;const _0x4bb1bb=yaml[_0x47ded6(0x1d7)](_0x57981b,_0x208dc5);_0x4114af['ubCtz'](mergeTemplates,_0x181ead,_0x4bb1bb),_0x181ead[_0x47ded6(0x174)][_0x4114af[_0x47ded6(0x1c9)]][_0x47ded6(0x15b)][0x0]['Parameters']['push'](_0x4114af[_0x47ded6(0x1aa)]);}else{const _0x2cc2fa={'nJdWI':function(_0x21854c,_0x27d953){const _0x48dd0a=_0x47ded6;return _0x4114af[_0x48dd0a(0x1c5)](_0x21854c,_0x27d953);}};let _0x12e3fa=0x1;_0x4ceded[_0x47ded6(0x1a0)](_0x134b3d=>{const _0x3d3d20=_0x47ded6;_0x3f303e['Parameters'][_0x3d3d20(0x1ba)]({'ParameterKey':_0x3d3d20(0x1c6)+_0x2cc2fa[_0x3d3d20(0x18a)](_0x103eb7,_0x12e3fa)[_0x3d3d20(0x1e7)](0x2,'0'),'ParameterValue':_0x134b3d}),_0x12e3fa+=0x1;});}}else{if(_0x4114af['vgUuX'](_0x4114af[_0x47ded6(0x1f1)],_0x4114af['qvTeu'])){const _0x3a1260=await fs[_0x47ded6(0x14b)](path[_0x47ded6(0x1e8)](__dirname,'..',_0x4114af[_0x47ded6(0x1df)],_0x4114af[_0x47ded6(0x194)]),_0x4114af[_0x47ded6(0x164)]),_0x25beb2={};_0x25beb2['schema']=CLOUDFORMATION_SCHEMA;const _0x5467cb=yaml['load'](_0x3a1260,_0x25beb2);_0x4114af[_0x47ded6(0x14f)](mergeTemplates,_0x181ead,_0x5467cb),_0x181ead[_0x47ded6(0x174)][_0x4114af['YGAjZ']][_0x47ded6(0x15b)][0x0]['Parameters'][_0x47ded6(0x1ba)](_0x4114af[_0x47ded6(0x188)]);}else _0xe76f42['Resources'][_0x33c4f4][_0x47ded6(0x1ce)]&&_0x2ac96f['Resources'][_0x5a49c0]['Properties'][_0x47ded6(0x1e4)]&&_0x27ce64[_0x47ded6(0x185)][_0x18a70d]['Properties'][_0x47ded6(0x1e4)][_0x47ded6(0x1ba)](..._0x2fcfcb);}},addS3Data=async _0x6b8080=>{const _0x665097=a21_0x5d143a,_0x530745={'aFzGX':_0x665097(0x1c4),'QdzZg':_0x665097(0x197),'fxtIa':_0x665097(0x1cf),'RwPPF':function(_0x2b6c72,_0x2cbcee){return _0x2b6c72(_0x2cbcee);},'vWtnk':function(_0x1e5ee4,_0x4076c0){return _0x1e5ee4===_0x4076c0;},'SaXxq':function(_0x485cde,_0x2e8a2c){return _0x485cde===_0x2e8a2c;},'HUisc':'IfuFs','vHEGj':function(_0x341040,_0x5f5b49,_0x8549c2){return _0x341040(_0x5f5b49,_0x8549c2);}},_0x267524=await fs[_0x665097(0x14b)](path[_0x665097(0x1e8)](__dirname,'..',_0x530745[_0x665097(0x18e)],_0x530745[_0x665097(0x1d9)]),_0x530745[_0x665097(0x195)]),_0x4dd366={};_0x4dd366[_0x665097(0x1af)]=CLOUDFORMATION_SCHEMA;const _0x33e2fe=yaml[_0x665097(0x1d7)](_0x267524,_0x4dd366),_0x4d78a5=await _0x530745[_0x665097(0x14c)](isBucketPresent,global_registry['s3Bucket']);_0x530745[_0x665097(0x1ae)](_0x4d78a5,![])&&(_0x530745[_0x665097(0x14a)](_0x530745['HUisc'],_0x530745['HUisc'])?_0x530745['vHEGj'](mergeTemplates,_0x6b8080,_0x33e2fe):_0x1b97e8[_0x665097(0x1dc)](_0x1f623a)[_0x665097(0x1a0)](_0x2e9b92=>{const _0x2a5345=_0x665097;var _0x4d4eeb=_0x4ac573[_0x2e9b92];_0xdb44d4[_0x2a5345(0x1dc)](_0x4d4eeb)['forEach'](_0x354efa=>{_0x14bbc1[_0x2e9b92][_0x354efa]=_0x4d4eeb[_0x354efa];});}));},addSubnetData=async(_0x2c6656,_0x883737)=>{const _0x2f4d74=a21_0x5d143a,_0x579dc8={'AWxCm':function(_0x359a9a,_0x5824eb){return _0x359a9a(_0x5824eb);},'evIPO':function(_0x5c68cb,_0x1676c1){return _0x5c68cb!==_0x1676c1;},'Xfzce':_0x2f4d74(0x19b),'aarGj':'RLrle','sswVg':_0x2f4d74(0x17a),'HWbQx':_0x2f4d74(0x149),'UrmsX':function(_0x5b85ff,_0x192752){return _0x5b85ff(_0x192752);},'cIxQP':_0x2f4d74(0x158),'vjOcb':_0x2f4d74(0x1b9),'hlOhy':_0x2f4d74(0x1c8),'wzHKH':function(_0x20eb70,_0x5899e9){return _0x20eb70(_0x5899e9);},'dgGlu':function(_0x4019c8,_0x5b3330){return _0x4019c8(_0x5b3330);},'EoQMB':'wlYKL','YWVKJ':'MFWUN','ingNk':_0x2f4d74(0x1c4),'HssmO':_0x2f4d74(0x1a5),'dzNwy':_0x2f4d74(0x1cf),'aMpKL':function(_0x4edc11,_0x56a1c9,_0x2b9975){return _0x4edc11(_0x56a1c9,_0x2b9975);},'sUFin':'EEzGj','HUShK':_0x2f4d74(0x192),'jexQU':_0x2f4d74(0x1de),'SKEwj':_0x2f4d74(0x19d),'tWVFg':_0x2f4d74(0x1b4),'joSkl':_0x2f4d74(0x16a),'oMqRL':_0x2f4d74(0x1ee),'MXdIK':'Subnet02Block','rdsrJ':_0x2f4d74(0x1b7)};if(_0x883737){if(_0x579dc8[_0x2f4d74(0x15d)](_0x579dc8[_0x2f4d74(0x1ea)],_0x579dc8[_0x2f4d74(0x17e)])){const _0x5a0ee3=await fs[_0x2f4d74(0x14b)](path['join'](__dirname,'..',_0x579dc8[_0x2f4d74(0x1e9)],_0x579dc8[_0x2f4d74(0x153)]),_0x579dc8[_0x2f4d74(0x162)]),_0x112b15={};_0x112b15[_0x2f4d74(0x1af)]=CLOUDFORMATION_SCHEMA;const _0x4caaef=yaml[_0x2f4d74(0x1d7)](_0x5a0ee3,_0x112b15);_0x579dc8[_0x2f4d74(0x17c)](mergeTemplates,_0x2c6656,_0x4caaef);let _0x4e6ee8=0x1;_0x883737[_0x2f4d74(0x1a0)](_0x1875be=>{const _0x78c0af=_0x2f4d74,_0x179113={'tDwOA':function(_0x2af302,_0x13b369){const _0x31a4e9=a21_0x5d49;return _0x579dc8[_0x31a4e9(0x1cd)](_0x2af302,_0x13b369);}};if(_0x579dc8['evIPO'](_0x579dc8['Xfzce'],_0x579dc8[_0x78c0af(0x145)])){const _0x249f68=_0x579dc8[_0x78c0af(0x16e)][_0x78c0af(0x143)]('|');let _0x18dee6=0x0;while(!![]){switch(_0x249f68[_0x18dee6++]){case'0':_0x4e6ee8+=0x1;continue;case'1':_0x2c6656[_0x78c0af(0x185)]['NodeGroup'][_0x78c0af(0x1ce)]['Subnets'][_0x78c0af(0x1ba)]({'Ref':_0x78c0af(0x1c6)+_0x579dc8['AWxCm'](String,_0x4e6ee8)['padStart'](0x2,'0')});continue;case'2':_0x2c6656[_0x78c0af(0x174)][_0x579dc8[_0x78c0af(0x172)]]['ParameterGroups'][0x0][_0x78c0af(0x1be)]['push']('Subnet'+_0x579dc8[_0x78c0af(0x1ec)](String,_0x4e6ee8)[_0x78c0af(0x1e7)](0x2,'0'));continue;case'3':_0x2c6656[_0x78c0af(0x185)][_0x78c0af(0x14d)][_0x78c0af(0x1ce)][_0x78c0af(0x1db)]['SubnetIds'][_0x78c0af(0x1ba)]({'Ref':'Subnet'+_0x579dc8[_0x78c0af(0x1ec)](String,_0x4e6ee8)['padStart'](0x2,'0')});continue;case'4':_0x2c6656[_0x78c0af(0x1b5)][_0x78c0af(0x1b0)][_0x78c0af(0x168)][_0x579dc8[_0x78c0af(0x18b)]][0x1][_0x78c0af(0x1ba)]({'Ref':_0x78c0af(0x1c6)+_0x579dc8[_0x78c0af(0x1ec)](String,_0x4e6ee8)[_0x78c0af(0x1e7)](0x2,'0')});continue;}break;}}else _0x5b66a1[_0x78c0af(0x1be)][_0x78c0af(0x1ba)]({'ParameterKey':_0x78c0af(0x1c6)+_0x179113[_0x78c0af(0x15e)](_0x21730d,_0x102206)[_0x78c0af(0x1e7)](0x2,'0'),'ParameterValue':_0x35e082}),_0x43e128+=0x1;});}else{for(let _0x1d9d5f in _0x23b25a[_0x2f4d74(0x185)]){_0x32a3c1[_0x2f4d74(0x185)][_0x1d9d5f][_0x2f4d74(0x1ce)]&&_0x3630c0[_0x2f4d74(0x185)][_0x1d9d5f]['Properties'][_0x2f4d74(0x1e4)]&&_0x140fac[_0x2f4d74(0x185)][_0x1d9d5f][_0x2f4d74(0x1ce)][_0x2f4d74(0x1e4)][_0x2f4d74(0x1ba)](..._0x3a38fc);}const _0x5c1359={};_0x392777[_0x2f4d74(0x1a0)](_0x53a742=>{const _0x4d5a5a=_0x2f4d74;_0x5c1359[_0x53a742[_0x4d5a5a(0x186)]]=_0x53a742[_0x4d5a5a(0x168)];}),_0x424b55['Resources'][_0x579dc8[_0x2f4d74(0x169)]][_0x2f4d74(0x1ce)]['Tags']=_0x5c1359;}}else{if(_0x579dc8['evIPO'](_0x579dc8[_0x2f4d74(0x1c7)],_0x579dc8[_0x2f4d74(0x1c0)])){const _0x8b1701=await fs[_0x2f4d74(0x14b)](path['join'](__dirname,'..',_0x579dc8[_0x2f4d74(0x1e9)],_0x579dc8[_0x2f4d74(0x148)]),_0x579dc8['dzNwy']),_0x1f76a4={};_0x1f76a4[_0x2f4d74(0x1af)]=CLOUDFORMATION_SCHEMA;const _0x2ae3d4=yaml[_0x2f4d74(0x1d7)](_0x8b1701,_0x1f76a4);_0x579dc8['aMpKL'](mergeTemplates,_0x2c6656,_0x2ae3d4),_0x2c6656[_0x2f4d74(0x185)][_0x2f4d74(0x14d)]['DependsOn'][_0x2f4d74(0x1ba)](_0x579dc8[_0x2f4d74(0x1ef)],_0x579dc8[_0x2f4d74(0x1c1)],_0x579dc8['joSkl']);const _0x3eac2f={};_0x3eac2f[_0x2f4d74(0x1da)]=_0x579dc8[_0x2f4d74(0x1ef)];const _0x3b75cd={};_0x3b75cd['Ref']=_0x579dc8[_0x2f4d74(0x1c1)];const _0x7824f3={};_0x7824f3['Ref']=_0x579dc8[_0x2f4d74(0x181)],_0x2c6656[_0x2f4d74(0x185)]['EKSCluster'][_0x2f4d74(0x1ce)]['ResourcesVpcConfig'][_0x2f4d74(0x1b0)]=[_0x3eac2f,_0x3b75cd,_0x7824f3],_0x2c6656['Metadata'][_0x579dc8[_0x2f4d74(0x172)]][_0x2f4d74(0x15b)][0x0][_0x2f4d74(0x1be)][_0x2f4d74(0x1ba)](_0x579dc8[_0x2f4d74(0x1eb)],_0x579dc8['MXdIK'],_0x579dc8[_0x2f4d74(0x170)]);const _0x408fac={};_0x408fac[_0x2f4d74(0x1da)]=_0x579dc8[_0x2f4d74(0x1ef)];const _0x4d0910={};_0x4d0910[_0x2f4d74(0x1da)]=_0x579dc8[_0x2f4d74(0x1c1)];const _0x2b2cf1={};_0x2b2cf1[_0x2f4d74(0x1da)]=_0x579dc8[_0x2f4d74(0x181)],_0x2c6656[_0x2f4d74(0x185)][_0x2f4d74(0x1b9)][_0x2f4d74(0x1ce)][_0x2f4d74(0x1e1)]=[_0x408fac,_0x4d0910,_0x2b2cf1],_0x2c6656[_0x2f4d74(0x1b5)][_0x2f4d74(0x1b0)][_0x2f4d74(0x168)][_0x579dc8[_0x2f4d74(0x18b)]][0x1]=[{'Ref':_0x579dc8[_0x2f4d74(0x1ef)]},{'Ref':_0x579dc8[_0x2f4d74(0x1c1)]},{'Ref':_0x579dc8[_0x2f4d74(0x181)]}];}else{const _0x57e4d1=_0x579dc8['hlOhy'][_0x2f4d74(0x143)]('|');let _0x4733c1=0x0;while(!![]){switch(_0x57e4d1[_0x4733c1++]){case'0':_0x51c8f3[_0x2f4d74(0x1b5)][_0x2f4d74(0x1b0)][_0x2f4d74(0x168)][_0x579dc8[_0x2f4d74(0x18b)]][0x1][_0x2f4d74(0x1ba)]({'Ref':_0x2f4d74(0x1c6)+_0x579dc8[_0x2f4d74(0x1a3)](_0x5b5398,_0x29803a)[_0x2f4d74(0x1e7)](0x2,'0')});continue;case'1':_0x30e209[_0x2f4d74(0x185)][_0x2f4d74(0x1b9)]['Properties'][_0x2f4d74(0x1e1)][_0x2f4d74(0x1ba)]({'Ref':_0x2f4d74(0x1c6)+_0x579dc8['UrmsX'](_0x225a55,_0x18bf10)[_0x2f4d74(0x1e7)](0x2,'0')});continue;case'2':_0x5eb60a[_0x2f4d74(0x185)][_0x2f4d74(0x14d)][_0x2f4d74(0x1ce)][_0x2f4d74(0x1db)]['SubnetIds']['push']({'Ref':'Subnet'+_0x579dc8[_0x2f4d74(0x1cd)](_0x23c888,_0x21b9e9)[_0x2f4d74(0x1e7)](0x2,'0')});continue;case'3':_0x40610c[_0x2f4d74(0x174)][_0x579dc8['HWbQx']]['ParameterGroups'][0x0]['Parameters'][_0x2f4d74(0x1ba)](_0x2f4d74(0x1c6)+_0x579dc8['dgGlu'](_0xf6c248,_0x59ac7f)['padStart'](0x2,'0'));continue;case'4':_0x4a8d56+=0x1;continue;}break;}}}},addTags=async(_0xcaccc0,_0x1f66ac,_0x344e21)=>{const _0x50f061=a21_0x5d143a,_0x14d98b={};_0x14d98b['FASzU']=function(_0xc96d77,_0x5e10ba){return _0xc96d77===_0x5e10ba;},_0x14d98b['nuClZ']=_0x50f061(0x177),_0x14d98b[_0x50f061(0x160)]=_0x50f061(0x1cb),_0x14d98b['JUPPq']=function(_0x42d7fc,_0x49a1c1){return _0x42d7fc===_0x49a1c1;},_0x14d98b['PklKe']=_0x50f061(0x1d3),_0x14d98b[_0x50f061(0x198)]=function(_0x21c2f2,_0x338b1d){return _0x21c2f2!==_0x338b1d;},_0x14d98b[_0x50f061(0x146)]='QEFba',_0x14d98b[_0x50f061(0x19e)]='SMqlB',_0x14d98b['ZkCyj']=_0x50f061(0x1b9);const _0x58745a=_0x14d98b;for(let _0x568dc9 in _0xcaccc0['Resources']){if(_0x58745a['JUPPq'](_0x58745a[_0x50f061(0x1e6)],_0x58745a['PklKe']))_0xcaccc0[_0x50f061(0x185)][_0x568dc9]['Properties']&&_0xcaccc0[_0x50f061(0x185)][_0x568dc9][_0x50f061(0x1ce)][_0x50f061(0x1e4)]&&(_0x58745a[_0x50f061(0x198)](_0x58745a[_0x50f061(0x146)],_0x58745a[_0x50f061(0x19e)])?_0xcaccc0[_0x50f061(0x185)][_0x568dc9]['Properties'][_0x50f061(0x1e4)][_0x50f061(0x1ba)](..._0x344e21):_0x3f93be[_0x42b16b][_0x8d193d]=_0x5d411d[_0x28f21f]);else{var _0x3bfa39=_0x5d186d[_0x2fa318];_0x4df871[_0x50f061(0x1dc)](_0x3bfa39)[_0x50f061(0x1a0)](_0x5ea141=>{_0x301d47[_0x1fd035][_0x5ea141]=_0x3bfa39[_0x5ea141];});}}const _0x242acb={};_0x344e21[_0x50f061(0x1a0)](_0x4718c8=>{const _0x2844d0=_0x50f061;_0x58745a[_0x2844d0(0x1b2)](_0x58745a['nuClZ'],_0x58745a[_0x2844d0(0x160)])?_0x47b307['Resources'][_0x4a1c76][_0x2844d0(0x1ce)]['Tags'][_0x2844d0(0x1ba)](..._0xa61645):_0x242acb[_0x4718c8[_0x2844d0(0x186)]]=_0x4718c8['Value'];}),_0xcaccc0['Resources'][_0x58745a[_0x50f061(0x167)]][_0x50f061(0x1ce)][_0x50f061(0x1e4)]=_0x242acb;},exports[a21_0x5d143a(0x1a7)]=async(_0x526d1d,_0xb86bed,_0x392ee8,_0x5365d9=null,_0x301c08=null)=>{const _0x54a859=a21_0x5d143a,_0x53132d={'hbQBP':function(_0x213216,_0x1cb2f8,_0x6816e9){return _0x213216(_0x1cb2f8,_0x6816e9);},'BUMwo':function(_0x4578da,_0x4e6e82){return _0x4578da(_0x4e6e82);},'yuxQE':_0x54a859(0x1e5),'pwhGU':_0x54a859(0x1e0),'BgCZI':'2010-05-15','QVEyS':'CFTemplates','hHdYu':_0x54a859(0x1b6),'fkJgU':_0x54a859(0x1cf),'cXpUi':function(_0x29e502,_0x9227e5,_0x750b51){return _0x29e502(_0x9227e5,_0x750b51);},'vLKpW':function(_0x26de76,_0x14a6c2,_0x2b510b,_0x2f11cd){return _0x26de76(_0x14a6c2,_0x2b510b,_0x2f11cd);},'Oluns':_0x54a859(0x163),'gXjYg':_0x54a859(0x15a),'jvNkt':_0x54a859(0x18c),'aLnrq':_0x54a859(0x178),'JfPtS':'NodeAutoScalingGroupMaxSize','KlEXs':_0x54a859(0x173),'dBFkM':_0x54a859(0x1d2),'YBKBj':'S3BucketName','VpWLf':_0x54a859(0x1d5),'IMHiS':function(_0x270f85,_0x558032){return _0x270f85!=_0x558032;},'XSgNX':function(_0x1e8ed2,_0x19cec1){return _0x1e8ed2!==_0x19cec1;},'YXFTa':'XMUke','BUtbh':_0x54a859(0x1dd),'kNQAY':function(_0x2cb12a,_0x2f95a0){return _0x2cb12a!=_0x2f95a0;},'IlLLB':_0x54a859(0x1a1)},_0x2a5cfb=COMMON_HST_TAGS,_0x11665d={};_0x11665d[_0x54a859(0x186)]=_0x53132d[_0x54a859(0x1d8)],_0x11665d['Value']=_0x526d1d,_0x2a5cfb[_0x54a859(0x1ba)](_0x11665d),_0x2a5cfb[_0x54a859(0x1ba)]({'Key':_0x53132d[_0x54a859(0x1c3)],'Value':new Date()[_0x54a859(0x14e)]()[_0x54a859(0x1f2)]()});const _0x378a69={};_0x378a69[_0x54a859(0x183)]=_0x53132d['BgCZI'];const _0xf68034=new AWS['CloudFormation'](_0x378a69),_0x428f25=await fs[_0x54a859(0x14b)](path[_0x54a859(0x1e8)](__dirname,'..',_0x53132d[_0x54a859(0x17f)],_0x53132d[_0x54a859(0x1b1)]),_0x53132d[_0x54a859(0x154)]),_0x42f079={};_0x42f079[_0x54a859(0x1af)]=CLOUDFORMATION_SCHEMA;const _0x2427e9=yaml[_0x54a859(0x1d7)](_0x428f25,_0x42f079);await _0x53132d[_0x54a859(0x1f3)](addVPCData,_0x2427e9,_0x5365d9),await _0x53132d[_0x54a859(0x175)](addS3Data,_0x2427e9),await _0x53132d['cXpUi'](addSubnetData,_0x2427e9,_0x301c08),await _0x53132d[_0x54a859(0x15f)](addTags,_0x2427e9,_0x526d1d,_0x2a5cfb);const _0x43d656=JSON[_0x54a859(0x147)](_0x2427e9),_0x380e07={};_0x380e07['StackName']=CLUSTER_DEP_STACK_NAME,_0x380e07[_0x54a859(0x179)]=_0x53132d[_0x54a859(0x1bc)],_0x380e07['TemplateBody']=_0x43d656,_0x380e07[_0x54a859(0x1be)]=[{'ParameterKey':_0x53132d[_0x54a859(0x157)],'ParameterValue':_0x526d1d},{'ParameterKey':_0x53132d['jvNkt'],'ParameterValue':_0x526d1d+_0x54a859(0x1ac)},{'ParameterKey':_0x53132d['aLnrq'],'ParameterValue':''+_0xb86bed},{'ParameterKey':_0x53132d[_0x54a859(0x1f0)],'ParameterValue':''+_0x392ee8},{'ParameterKey':_0x53132d[_0x54a859(0x1cc)],'ParameterValue':global_registry[_0x54a859(0x1ed)]},{'ParameterKey':_0x53132d[_0x54a859(0x196)],'ParameterValue':global_registry[_0x54a859(0x19f)]},{'ParameterKey':_0x53132d['YBKBj'],'ParameterValue':global_registry[_0x54a859(0x1ab)]}],_0x380e07[_0x54a859(0x1ad)]=[_0x53132d[_0x54a859(0x1d4)]],_0x380e07[_0x54a859(0x1e4)]=_0x2a5cfb;const _0x438843=_0x380e07;if(_0x53132d[_0x54a859(0x144)](_0x5365d9,null)&&_0x53132d['XSgNX'](_0x5365d9,undefined)){if(_0x53132d[_0x54a859(0x156)](_0x53132d[_0x54a859(0x165)],_0x53132d['YXFTa']))_0x53132d[_0x54a859(0x1f3)](_0x38e004,_0x58875d,_0x35fee0);else{const _0x19ab72={};_0x19ab72[_0x54a859(0x1e2)]=_0x53132d[_0x54a859(0x182)],_0x19ab72['ParameterValue']=_0x5365d9,_0x438843[_0x54a859(0x1be)][_0x54a859(0x1ba)](_0x19ab72);}}if(_0x53132d[_0x54a859(0x171)](_0x301c08,null)&&_0x53132d['XSgNX'](_0x301c08,undefined)){let _0x469783=0x1;_0x301c08[_0x54a859(0x1a0)](_0x4e493a=>{const _0x1ff43f=_0x54a859;_0x438843['Parameters'][_0x1ff43f(0x1ba)]({'ParameterKey':_0x1ff43f(0x1c6)+_0x53132d[_0x1ff43f(0x175)](String,_0x469783)[_0x1ff43f(0x1e7)](0x2,'0'),'ParameterValue':_0x4e493a}),_0x469783+=0x1;});}const _0x3370c0=await _0xf68034[_0x54a859(0x1bd)](_0x438843)[_0x54a859(0x1d6)]();logger[_0x54a859(0x18f)]('Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete');const _0x3ac43a={};return _0x3ac43a[_0x54a859(0x159)]=_0x3370c0[_0x54a859(0x1d1)],_0xf68034[_0x54a859(0x199)](_0x53132d['IlLLB'],_0x3ac43a)[_0x54a859(0x1d6)]();};